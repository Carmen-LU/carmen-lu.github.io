<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="">
        <meta name="author" content="">
        <title>Agency - Start Bootstrap Theme</title>
        <!-- Bootstrap core CSS -->
        <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <!-- Custom fonts for this template -->
        <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet"
        type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700"
        rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Kaushan+Script" rel="stylesheet"
        type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic"
        rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700"
        rel="stylesheet" type="text/css">
        <!-- Custom styles for this template -->
        <link href="css/agency.min.css" rel="stylesheet">
    </head>
    
    <body id="page-top">
        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand js-scroll-trigger" href="#page-top">Love Movies</a>
                <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
                data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
                aria-label="Toggle navigation">Menu
                    <i class="fas fa-bars"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav text-uppercase ml-auto">
                        <li class="nav-item">
                            <a class="nav-link js-scroll-trigger" href="#movies">Movies</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link js-scroll-trigger" href="#details">Details</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link js-scroll-trigger" href="#cinemas">Cinemas</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link js-scroll-trigger" href="#map">Map</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Header -->
        <header class="masthead">
            <div class="container">
                <div class="intro-text">
                    <div class="intro-lead-in">Welcome To My Site!</div>
                    <div class="intro-heading text-uppercase">Love Movie Recommendation</div>
                    <a class="btn btn-primary btn-xl text-uppercase js-scroll-trigger"
                    href="#movies">Show More</a>
                </div>
            </div>
        </header>
        <!-- Movies -->
        <section class="page-section" id="movies">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 text-center">
                        <h2 class="section-heading text-uppercase">Movies</h2>
                        <h3 class="section-subheading text-muted">Lorem ipsum dolor sit amet consectetur.</h3>
                        <iframe class="airtable-embed" src="https://airtable.com/embed/shrF4hkZ2mSDC049J?backgroundColor=orange&viewControls=on" frameborder="0" onmousewheel="" width="100%" height="533" style="background: transparent; border: 1px solid #ccc;"></iframe>
                    </div>
                </div>
            </div>
        </section>

        <!-- Details -->
        <section class="bg-light page-section" id="details">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 text-center">
                        <h2 class="section-heading text-uppercase">Movie Details</h2>
                        <h3 class="section-subheading text-muted">Lorem ipsum dolor sit amet consectetur.</h3>
                        <button type="button" class="btn btn-info" id='get_data'>Show GetJSON Table</button><br><br>
                        <div class="table-responsive">
                        <table id="table1" width="100%" class="table table-bordered"></table>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-8 mx-auto text-center">
                        <p class="large text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aut eaque, laboriosam
                            veritatis, quos non quis ad perspiciatis, totam corporis ea, alias ut unde.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Cinemas -->
        <section class="page-section" id="cinemas"">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 text-center">
                        <h2 class="section-heading text-uppercase">HK Cinemas</h2>
                        <h3 class="section-subheading text-muted">Lorem ipsum dolor sit amet consectetur.</h3>
                    </div>
                </div>
            </div>
        </section>

        <!-- Map -->
        <section class="bg-light page-section" id="map">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 text-center">
                        <h2 class="section-heading text-uppercase">Cinema Map</h2>
                        <h3 class="section-subheading text-muted">Lorem ipsum dolor sit amet consectetur.</h3>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-8 mx-auto text-center">
                        <p class="large text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aut eaque, laboriosam
                            veritatis, quos non quis ad perspiciatis, totam corporis ea, alias ut unde.</p>
                    </div>
                </div>
            </div>
        </section>
       
        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-4">
                        <span class="copyright">Copyright © Your Website 2019</span>
                    </div>
                    <div class="col-md-4">
                        <ul class="list-inline social-buttons">
                            <li class="list-inline-item">
                                <a href="#">
                <i class="fab fa-twitter"></i>
              </a>
                            </li>
                            <li class="list-inline-item">
                                <a href="#">
                <i class="fab fa-facebook-f"></i>
              </a>
                            </li>
                            <li class="list-inline-item">
                                <a href="#">
                <i class="fab fa-linkedin-in"></i>
              </a>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-4">
                        <ul class="list-inline quicklinks">
                            <li class="list-inline-item">
                                <a href="#">Privacy Policy</a>
                            </li>
                            <li class="list-inline-item">
                                <a href="#">Terms of Use</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>
  
        <!-- Bootstrap core JavaScript -->
        <script src="vendor/jquery/jquery.min.js"></script>
        <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
        <!-- Plugin JavaScript -->
        <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
        <!-- Custom scripts for this template -->
        <script src="js/agency.js"></script>

        <script>
        $(document).ready(function(){

            $("button#get_data").click(function(){
                var items = [];
                var i = 0;
                var airtable_read_endpoint = "https://api.airtable.com/v0/appOkCJ9DXJ5WgGVW/Movie?api_key=keyVgAVOiOdcDu9Eh";
                var dataSet = [];
                $.getJSON(airtable_read_endpoint, function(result){
                    $.each(result.records, function(key,value){
                        items = [];
                            items.push(value.fields.电影);
                            items.push(value.fields.豆瓣评分);
                            items.push(value.fields.导演);
                            items.push(value.fields.编剧);
                            items.push(value.fields.主演);
                            items.push(value.fields.上映日期);
                            items.push(value.fields.上映地点);
                            items.push(value.fields.时长);
                            items.push(value.fields.剧情简介);
                            dataSet.push(items);
                            console.log(items);
                        }); // end .each
                        console.log(dataSet);
        
                    $('#table1').DataTable({
                        data: dataSet,
                        retrieve: true,
                        columns:[
                            { title: "电影",
                              defaultContent:""},
                            { title: "豆瓣评分",
                              defaultContent:"" },
                            { title: "导演",
                              defaultContent:""},
                            { title: "编剧",
                              defaultContent:""},
                            { title: "主演",
                              defaultContent:""},
                            { title: "上映日期",
                              defaultContent:""},
                            { title: "上映地点",
                              defaultContent:""},
                            { title: "时长",
                              defaultContent:""},
                            { title: "剧情简介",
                              defaultContent:""},]
                    });
                });
            }); //end button
        
            $("button#get_data2").click(function() {
              var items = [];
              var i = 0;
              var airtable_read_endpoint = "https://api.airtable.com/v0/appOkCJ9DXJ5WgGVW/Venue?api_key=keyVgAVOiOdcDu9Eh";
              var dataSet = [];
              $.getJSON(airtable_read_endpoint, function(result) {
                     $.each(result.records, function(key,value) {
                         items = [];
                             items.push(value.fields.上映地点);
                             items.push(value.fields.电影总数);
                             dataSet.push(items);
                             console.log(items);
                      }); // end .each
                      console.log(dataSet);
        
                   $('#table2').DataTable( {
                       data: dataSet,
                       retrieve: true,
                       columns: [
                           { title: "上映地点",
                             defaultContent:""},
                           { title: "电影总数",
                               defaultContent:"" },]
                   });
        
                   var chart = c3.generate({
                        data: {
                            columns: dataSet,
                            type : 'pie'
                        },
                        axis: {
                          x: {label: '上映地点'},
                          y: {label: '电影总数'}
                        },
                        pie: {
                            title: "电影上映地点统计",
                        }
                    });
        
              }); // end .getJSON
        
            }); // end button
        
        }); // document ready
    </script>
    </body>

</html>